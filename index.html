<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ahnen-Manager</title>
  <link rel="stylesheet" href="styles.css"/>
  <script defer src="app.js"></script>
</head>
<body>
  <div class="app">
    <header class="ribbon">
      <div class="title-wrap">
        <img class="coa" src="wappen.png" alt="Wappen">
        <div class="title-area">
          <div class="title">Ahnen-Manager</div>
          <div class="version-under">Version 1.0.0</div>
        </div>
      </div>
      <div class="hint-row">
        Bearbeiten eines Eintrags durch Doppelklick auf die Person.
        Personen- und Ring-Code werden vom Programm vergeben. Denke daran, die Datenbank durch Export zu sichern.
      </div>
    </header>

    <div class="toolbar">
      <div class="button-row">
        <button id="btnNew" class="btn">Neue Person</button>
        <button id="btnUndo" class="btn">Undo</button>
        <button id="btnRedo" class="btn">Redo</button>
        <button id="btnImport" class="btn">Import</button>
        <button id="btnExport" class="btn">Export</button>
        <button id="btnPrint" class="btn">Drucken</button>
        <button id="btnStats" class="btn">Statistik</button>
        <button id="btnHelp" class="btn help">Hilfe</button>
      </div>
      <div class="search-container">
        <input type="text" id="search" placeholder="Suchen...">
      </div>
    </div>

    <div class="table-wrap">
      <table id="peopleTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Geburtsdatum</th>
            <th>Geburtsort</th>
            <th>Vater</th>
            <th>Mutter</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="tree-wrap">
      <svg id="tree" class="tree"></svg>
    </div>
  </div>

  <!-- Dialoge -->
  <dialog id="personDialog">
    <form method="dialog">
      <div class="dlg-head">
        <span id="dlgTitle">Neue Person</span>
        <button class="close-x" value="cancel">&times;</button>
      </div>
      <div class="dlg-body">
        <div class="form-grid">
          <label>Vorname<input name="firstName" required></label>
          <label>Nachname<input name="lastName" required></label>
          <label>Geburtsdatum<input name="birthDate" type="date"></label>
          <label>Geburtsort<input name="birthPlace"></label>
          <label>Vater<select name="father"></select></label>
          <label>Mutter<select name="mother"></select></label>
        </div>
      </div>
      <div class="dlg-actions">
        <button type="submit" value="save">Speichern</button>
        <button type="button" value="cancel" onclick="document.getElementById('personDialog').close()">Abbrechen</button>
      </div>
    </form>
  </dialog>

  <script>
    // Reconnect zu welcome.html bei leerer DB
    document.addEventListener('DOMContentLoaded', () => {
      if (!localStorage.getItem('people')) {
        window.location.href = "welcome.html";
      }
    });
  </script>
</body>
</html>
