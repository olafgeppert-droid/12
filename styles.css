/* styles.css – modernes, gut lesbares UI */
:root{
  --brand: #1665d8;
  --brand2: #0f4fb3;
  --ribbon-fg: #fff;
  --panel: #ffffff;
  --border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --danger: #dc2626;
  --button-height: 38px;
  --button-font-size: 14px;
  --input-height: 38px;
  
  /* Generation colors */
  --gen1-color: #e8f5e8;
  --gen2-color: #e3f2fd;
  --gen3-color: #f3e5f5;
  --gen4-color: #fff3e0;
  --gen5-color: #e8eaf6;
  --gen6-color: #f1f8e9;
  --gen7-color: #ffebee;
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:#fafafa;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}

.app{max-width:1240px;margin:0 auto;padding-bottom:32px}

/* Ribbon */
.ribbon{
  position:sticky; top:0; z-index:5;
  background: linear-gradient(90deg, var(--brand), var(--brand2));
  color:var(--ribbon-fg);
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  position: relative;
  padding-bottom: 20px;
}
.title-wrap{display:flex;align-items:center;justify-content:center;gap:14px;padding:12px 16px}
.title{margin:0;font-size:28px;letter-spacing:.3px;text-align:center}
.coa{height:34px;width:auto}

/* Toolbar */
.toolbar{
  display: flex;
  flex-direction: column;
  gap: 10px;
  background:#fff;
  border-top:1px solid rgba(255,255,255,.2);
  border-bottom:1px solid var(--border);
  padding:12px;
  width: 100%;
}

.button-row{
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
}

.search-container{
  display: flex;
  justify-content: center;
  flex: 1;
  max-width: 280px;
  margin: 0 10px;
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content: center;
  gap:6px;
  padding:8px 12px;
  height: var(--button-height);
  min-width: 100px;
  border:1px solid #d0d7de;
  background:#f4f6f8;
  color:#111827;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
  font-size: var(--button-font-size);
  white-space: nowrap;
  transition: all 0.2s ease;
}
.btn:hover{
  background:#eef2f7;
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.btn:focus{
  outline: 2px solid var(--brand);
  outline-offset: 2px;
}
.btn[disabled]{opacity:.5;pointer-events:none}
.btn.danger{
  background:#fee2e2;
  border-color:#fecaca;
  color:#991b1b;
}
.btn.help{
  background:#f4f6f8;
  border-color:#d0d7de;
  color:#d32f2f;
}

input[type="text"]{
  padding:8px 12px;
  height: var(--input-height);
  border:1px solid #d1d5db;
  border-radius:6px;
  width: 100%;
  font-size: var(--button-font-size);
  transition: all 0.2s ease;
}
input[type"text"]:focus {
  outline: 2px solid var(--brand);
  outline-offset: 2px;
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(22, 101, 216, 0.1);
}

/* Hinweiszeile */
.hint-row{
  background:#fff;
  border-bottom:1px solid var(--border);
  padding:8px 12px;
  width: 100%;
}
#autoHint{
  border:1px solid var(--border);
  border-radius:8px;
  padding:8px 12px;
  color:#374151;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-size:clamp(12px, 1.8vw, 14px);
}

/* Table */
.table-wrap{padding:12px}
table{width:100%;border-collapse:separate;border-spacing:0 6px}
th,td{text-align:left;padding:8px 12px;font-size: 14px;}
th{position:sticky; top:120px; background:#fff; z-index:1; box-shadow:0 1px 0 var(--border); font-weight: 600;}
td{border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
tr td:first-child, tr th:first-child{border-left:1px solid var(--border);border-top-left-radius:6px;border-bottom-left-radius:6px}
tr td:last-child, tr th:last-child{border-right:1px solid var(--border);border-top-right-radius:6px;border-bottom-right-radius:6px}
mark{background:#fff3bf;padding:0 2px;border-radius:3px}

/* Hinweis unter der Tabelle */
.table-hint {
  text-align: center;
  font-size: 14px;
  color: #6b7280;
  margin: 12px 0;
  padding: 8px;
  font-style: italic;
}

/* Version unter der Tabelle - näher am Hinweis */
.version-under {
  text-align: right;
  font-size: 12px;
  margin: -8px 12px 0;
  color: #111;
  padding-right: 8px;
}

/* Tree panel */
.tree-panel{padding:8px 12px}
#treeContainer {
  width: 100%;
  height: 70vh;
  overflow: hidden; /* Scrollen wird per JS (Pan) gesteuert */
  cursor: grab;
  position: relative;
  background:#f8fafc;
  border:1px solid var(--border);
  border-radius:8px;
}
#tree, #tree svg {
  width: 100%;
  height: 100%;
}

/* Dialogs */
dialog{border:none;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.2);padding:0;max-width:min(800px, 95vw)}
dialog::backdrop{background:rgba(0,0,0,0.2)}
.dlg-head{padding:12px 16px;background:#f4f6f8;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.dlg-body{padding:16px;max-height:70vh;overflow:auto}
.dlg-actions{padding:12px 16px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end}
.close-x{border:none;background:transparent;font-size:20px;cursor:pointer}
.close-x:focus{
  outline: 2px solid var(--brand);
  outline-offset: 2px;
}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
.form-grid label{font-size:.9rem;color:#374151; font-weight: 500; display:flex; flex-direction:column; gap: 4px;}
.form-grid input, .form-grid select{
  padding:8px 12px;
  border:1px solid #d1d5db;
  border-radius:6px;
  font-size: 14px;
  width: 100%;
}
.form-grid input:focus, .form-grid select:focus {
  outline: 2px solid var(--brand);
  outline-offset: 2px;
  border-color: var(--brand);
}
.btn-row{display:flex;gap:10px;flex-wrap:wrap}

/* Responsive Anpassungen */
@media (max-width: 768px) {
  .title { font-size: 24px; }
  .coa { height: 30px; }
  .button-row { gap: 5px; }
  .btn { padding: 6px 8px; font-size: 12px; min-width: 80px; }
  .search-container { order: 1; max-width: 100%; margin: 6px 0; }
  .additional-functions { flex-wrap: wrap; }
  input[type="text"] { max-width: 240px; }
  .form-grid { grid-template-columns: 1fr; }
}

/* Print styles */
body.printing-mode {
    background: white !important;
}
body.printing-mode > *:not(.print-container) {
    display: none !important;
}
.print-container {
    display: block !important;
    position: absolute;
    top: 0; left: 0;
    width: auto !important;
    height: auto !important;
    margin: 0 !important;
    padding: 20px !important;
    box-shadow: none !important;
    border: none !important;
    background: white !important;
}
.printing-mode #treeContainer {
    overflow: visible !important;
    height: auto !important;
}
.printing-mode table {
    font-size: 9pt;
}
.printing-mode th, .printing-mode td {
    border: 1px solid #ccc !important;
    padding: 4px;
}
