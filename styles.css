/* styles.css – modernes, gut lesbares UI */
:root{
  --brand: #1665d8;
  --brand2: #0f4fb3;
  /* ... restliche Variablen ... */
}

/* ... restliche Styles ... */

/* Tree panel - KORREKTUREN FÜR ÜBERLAPPUNG */
.tree-panel{padding:8px 12px}

#treeContainer { /* NEU: Container für bessere Kontrolle */
  width: 100%;
  height: 100%;
  overflow: auto; /* Scrollbalken hier, nicht am #tree-Element */
  -webkit-overflow-scrolling: touch; /* Flüssiges Scrollen auf iOS */
}

#tree{
  background:#f8fafc;
  border:1px solid var(--border);
  border-radius:8px;
  min-height:240px;
  max-height:60vh;
  /* Overflow wurde zum Container verschoben */
  position: relative; /* Wichtig für absolut positionierte Kind-Elemente (Nodes) */
}

/* WICHTIG: Diese Regel entfernen oder auskommentieren, da sie die Schriftgröße überschreibt */
/* .node text{font-size:11px;fill:#111827} */

/* NEUE REGEL: Stellt sicher, dass Box-Berechnungen konsistent sind */
.node {
  box-sizing: border-box; 
}


/* ... restliche Styles bis zum Druck ... */


/* Print styles for better printing experience - ÜBERARBEITET */
/* Diese Klasse muss per JS vor dem Aufruf von html2canvas auf den body gesetzt werden */
body.printing-mode {
    background: white !important;
    font-size: 10pt; /* Kleinere Schrift für den Druck */
    color: #000 !important;
}

/* Versteckt alles, was nicht gedruckt werden soll */
.printing-mode .ribbon,
.printing-mode .toolbar,
.printing-mode .hint-row,
.printing-mode .table-hint,
.printing-mode .version-under,
.printing-mode dialog,
.printing-mode .table-wrap:not(.print-this), /* Verstecke Tabelle, außer sie soll gedruckt werden */
.printing-mode .tree-panel:not(.print-this) { /* Verstecke Baum, außer er soll gedruckt werden */
    display: none !important;
}

/* Stellt sicher, dass das zu druckende Element den ganzen Platz einnimmt */
.printing-mode .print-this {
    display: block !important;
    width: 100% !important;
    height: auto !important;
    overflow: visible !important;
    background: white !important;
    box-shadow: none !important;
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
    max-height: none !important; /* Wichtig, um Höhenbeschränkungen aufzuheben */
}

/* Spezifische Stile für den Tabellendruck */
.printing-mode .table-wrap.print-this table {
    width: 100% !important;
    border-collapse: collapse !important;
    font-size: 9pt !important;
}

.printing-mode .table-wrap.print-this th,
.printing-mode .table-wrap.print-this td {
    border: 1px solid #ccc !important;
    padding: 4pt 6pt !important;
}

/* Spezifische Stile für den Baum-Druck */
.printing-mode .tree-panel.print-this #treeContainer {
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
}

.printing-mode .tree-panel.print-this #tree {
    /* Wichtig: Breite so setzen, dass der ganze Baum Platz hat. Muss evtl. per JS angepasst werden. */
    width: fit-content !important; 
    height: auto !important;
    overflow: visible !important;
    max-height: none !important;
    border: none !important;
}

/* Verbessert die Lesbarkeit des Baums im erzeugten PDF */
.printing-mode .node text {
    font-size: 10pt !important;
    fill: #000 !important;
}

.printing-mode .node rect, .printing-mode .node circle {
    stroke: #000 !important;
    fill: #fff !important; /* Weißer Hintergrund für Kontrast */
}

.printing-mode .link { /* Falls die Verbindungslinien eine Klasse 'link' haben */
    stroke: #333 !important;
    stroke-width: 1.5px !important;
}